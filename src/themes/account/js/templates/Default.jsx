'use strict';
import React, {useEffect, useRef, useState} from 'react';
import { Link, useLocation } from 'react-router-dom';
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import Connexion from './account/Connexion';
import Recover from './account/Recover';
import RecoverLast from './account/RecoverLast';
import Dashboard from './account/Dashboard';
import Edit from './account/Edit';
import Sites from './account/Sites';
import Support from './account/Support';
import Subscriptions from './account/Subscriptions';

const Default = () => {


	const [isConnected, setConnected] = useState(USER.id ? true : false);
	const [mainTitle, setMainTitle] = useState(null);
	const [mainText, setMainText] = useState(null);

	const navigationRef = useRef(null);
	const endNavigationRef = useRef(null);
	const disconnectRef = useRef(null);

	const location = useLocation();

	const current_site = USER.sites?.find(site => site.id == location.search.replace('?edit=', ''));

	const map = {
		"/": {
			title: 'Tableau de bord',
			text: 'Accédez rapidement à vos possibilités.'
		},
		"/profil/": {
			title: 'Mon profil',
			text: 'Vos informations sont-elles à jour ?'
		},
		"/mes-sites/": {
			title: current_site?.name || 'Mes sites',
			text: current_site?.domain || 'Accès aux gestionnaires de contenus.'
		},
		"/mes-abonnements/": {
			title: 'Mes abonnements',
			text: 'Gestion des abonnements via Stripe.'
		},
		"/support/": {
			title: 'Support',
			text: 'Besoin d\'aide ?'
		}
	};
	

	useEffect(() => {

		const killEvents = [];

		if(isConnected){

			//window.gscroll.kill();

			let canClick = true;

			const handleClick = () => {

				if(!canClick) return;
				canClick = false;

				const formData = new FormData();
				formData.append('action', 'disconnect');

				disconnectRef.current.querySelector('span').innerText = 'Un instant..';

				fetch(SYSTEM.ajaxPath, {
					method: 'POST',
					body: formData
				})
				.then(resp => resp.json())
				.then(data => {

					disconnectRef.current.querySelector('span').innerText = 'Déconnexion';

					window.location.reload();

				});

			}


			disconnectRef.current.addEventListener('click', handleClick);

			killEvents.push(() => disconnectRef.current?.removeEventListener('click', handleClick));

		}


		return () => killEvents?.forEach(killEvent => killEvent());

	});

	useEffect(() => {

		setMainTitle(map[location.pathname]?.title || null);
		setMainText(map[location.pathname]?.text || null);

		navigationRef.current?.querySelector('li[data-is="'+ location.pathname +'"]')?.classList.add('active');
		endNavigationRef.current?.querySelector('li[data-is="'+ location.pathname +'"]')?.classList.add('active');


		return () => {

			navigationRef.current?.querySelector('.active')?.classList.remove('active');
			endNavigationRef.current?.querySelector('.active')?.classList.remove('active');

		}

	}, [location.pathname]);

	return(
		<>
			{isConnected ? (
				<div id="account_view">
					<div className="side">
						<div className="inner">
							<div className="top">
								<Link to="/" className="logo">
									<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 628.8 99.6"><path d="M10.3,78.7c-3.9-1.9-6.6-4.5-8.2-7.6-1.6-3.1-2.3-6.5-2.1-10.3h16.3c-.3,5.7,2.9,8.5,9.7,8.5s5.1-.5,6.7-1.5c1.6-1,2.3-2.3,2.3-4s-.8-3.1-2.4-4c-1.6-.9-4.1-1.9-7.6-2.9l-2.6-.8c-5.4-1.7-9.6-3.7-12.6-6-3-2.3-4.5-5.7-4.5-10.2s1.1-6.9,3.2-9.8c2.2-2.9,5.2-5.1,9.3-6.8s8.7-2.5,14-2.5,10.3.9,14.1,2.8c3.7,1.9,6.4,4.3,7.9,7.2,1.6,2.9,2.2,6,1.8,9.2h-16.4c.1-2.5-.4-4.3-1.8-5.5s-3.5-1.8-6.6-1.8-4.5.4-5.9,1.3c-1.4.9-2.1,2.1-2.1,3.6s.7,2.9,2.1,3.7c1.4.8,3.8,1.8,7.3,2.8,1.2.3,2.1.6,2.7.8,5.8,1.8,10.3,3.9,13.4,6.4,3.1,2.5,4.7,6,4.7,10.6s-1,6.7-3,9.7c-2,3-5,5.4-9.1,7.3-4.1,1.9-9.2,2.8-15.4,2.8s-11.3-1-15.2-2.9Z"/><path d="M67.6,22.7h17.9l-11.2,57.2h-17.9l11.2-57.2ZM72.1,0h17.9l-3.1,15.9h-17.9l3.1-15.9Z"/><path d="M95.3,77.9c-2.4-2-3.6-5.2-3.6-9.6s.3-4.5.8-7l4.9-25.2h-7.9l2.6-13.4h7.9l3.1-16h17.9l-3.1,16h9.9l-2.6,13.4h-9.9l-4.8,24.8c-.2,1.1-.3,2.1-.3,2.9,0,1.6.4,2.6,1.2,3.1.8.5,2,.7,3.6.7s2.9-.1,4.9-.4l-2.5,12.6c-3.6.8-7.3,1.2-10.8,1.2-5.1,0-8.9-1-11.3-3Z"/><path d="M133.3,75.1c-4.3-4.4-6.5-10.8-6.5-19.2s1.4-12.2,4.2-17.5c2.8-5.4,6.9-9.6,12.2-12.8,5.3-3.2,11.6-4.8,18.7-4.8s15.1,2.2,19,6.5c3.9,4.3,5.8,10.4,5.8,18.2s-.4,6.7-1.1,10.6h-41.8v.9c0,4.2.9,7.1,2.8,8.8,1.9,1.7,4.4,2.6,7.7,2.6s5.7-.6,7.6-1.9c2-1.3,3.1-2.8,3.5-4.6h18.2c-2.8,6.3-6.8,11.2-12,14.7s-11.6,5.2-19.1,5.2-15-2.2-19.3-6.6ZM169.4,45c.1-.7.2-1.6.2-2.9,0-2.8-.8-4.9-2.3-6.3s-3.8-2.2-6.7-2.2-7,1-9.5,3.1c-2.5,2-4.4,4.8-5.6,8.3h23.9Z"/><path d="M202.8,79.8h-7.3V22.9h7.3v11.6h.2c1.6-3.9,3.7-7.1,6.4-9.4,2.7-2.3,6-3.5,9.8-3.5s3.6.1,4.9.3v7.1c-1.1-.2-2.3-.3-3.5-.3-3.3,0-6.4.8-9.1,2.5-2.7,1.7-4.9,4-6.4,6.9-1.6,2.9-2.3,6.2-2.3,9.9v31.8Z"/><path d="M231.6,76.9c-3.4-2.9-5.1-6.7-5.1-11.5s.9-7.1,2.7-9.6c1.8-2.5,4.4-4.4,7.7-5.7,3.3-1.3,7.7-2.5,13.1-3.5,4.2-.7,7.3-1.4,9.1-1.8s3.3-1.3,4.5-2.4c1.2-1.1,1.8-2.8,1.8-4.9s-1.1-5.4-3.2-7.1c-2.1-1.7-5.4-2.6-9.8-2.6s-9.2,1-11.6,2.9c-2.3,1.9-3.7,5.1-4,9.4h-7.7c.3-5.5,2.3-10,6.1-13.5,3.8-3.5,9.6-5.2,17.3-5.2s10.6,1.4,14.2,4.3c3.7,2.9,5.5,7.5,5.5,13.8v28.5c0,2.4.2,4.1.7,5.1.4,1,1.3,1.6,2.6,1.6s1.1,0,1.6-.1v5.2c-1.6.3-2.9.4-3.8.4-2.5,0-4.4-.7-5.8-2-1.3-1.3-2.1-3.7-2.3-7.1h-.2c-1.9,3.3-4.6,5.8-8,7.5-3.4,1.7-7.4,2.6-12,2.6s-10.2-1.5-13.6-4.4ZM246,74.9c5.9,0,10.6-1.5,14.1-4.4,3.5-2.9,5.2-6.9,5.2-12v-10.6c-.7,1-2.4,1.9-4.9,2.7-2.5.7-5.7,1.5-9.7,2.1-5.9,1-10.1,2.4-12.8,4.2-2.6,1.7-4,4.4-4,7.9,0,6.8,4,10.2,11.9,10.2Z"/><path d="M301.9,78.2c-3.1-2-5.6-4.6-7.5-8h-.2v29.4h-7.3V22.9h7.3v9.2h.2c1.9-3.1,4.5-5.7,7.6-7.6,3.1-2,7-3,11.6-3s8.9,1.2,12.7,3.6c3.8,2.4,6.8,5.9,9,10.4,2.2,4.5,3.4,9.8,3.4,15.9s-1.1,11.3-3.4,15.8c-2.2,4.5-5.2,8-9,10.4-3.8,2.4-8,3.6-12.7,3.6s-8.6-1-11.7-3ZM296.5,63.7c1.6,3.5,3.8,6.3,6.6,8.2,2.8,1.9,6.1,2.9,9.7,2.9s7.1-1,9.9-3.1,4.9-4.9,6.3-8.5c1.4-3.6,2.1-7.5,2.1-11.8,0-6.7-1.6-12.3-4.9-16.8-3.2-4.5-7.7-6.8-13.5-6.8s-6.9,1-9.7,2.9c-2.8,1.9-5,4.7-6.6,8.3-1.6,3.6-2.3,7.7-2.3,12.4s.8,8.8,2.3,12.3Z"/><path d="M348,2.1h9.4v9.4h-9.4V2.1ZM349.1,22.9h7.3v56.9h-7.3V22.9Z"/><path d="M379.1,77.7c-3.8-2.4-6.9-5.9-9-10.4-2.2-4.5-3.3-9.8-3.3-15.9s1.1-11.3,3.3-15.8c2.2-4.5,5.2-8,9-10.4,3.8-2.4,8.1-3.6,12.7-3.6s8.6,1,11.7,3c3.1,2,5.6,4.6,7.5,8h.2V0h7.3v79.8h-7.3v-9.3h-.2c-1.9,3.1-4.4,5.7-7.5,7.7-3.2,2-7.1,3-11.7,3s-8.8-1.2-12.7-3.6ZM379.2,68.2c3.2,4.5,7.7,6.8,13.5,6.8s6.9-1,9.7-2.9c2.8-1.9,5-4.7,6.5-8.2,1.6-3.5,2.3-7.7,2.3-12.4s-.8-8.8-2.3-12.3c-1.6-3.5-3.7-6.3-6.5-8.2-2.8-1.9-6-2.9-9.7-2.9s-7.1,1-9.9,3.1c-2.8,2.1-4.9,4.9-6.3,8.5-1.4,3.6-2.1,7.5-2.1,11.8,0,6.7,1.6,12.3,4.9,16.8Z"/><path d="M441.4,77.5c-4.1-2.6-7.2-6.1-9.3-10.7-2.1-4.5-3.2-9.7-3.2-15.5s1.1-11.3,3.3-15.8c2.2-4.5,5.4-8,9.5-10.4,4.1-2.5,8.9-3.7,14.3-3.7s10,1.2,13.8,3.5c3.9,2.3,6.8,5.6,8.8,9.7,2,4.1,3,8.8,3,14.1s0,3.4-.1,4h-45.1c0,4,.8,7.7,2.3,11.1,1.5,3.4,3.6,6.1,6.6,8.2,2.9,2,6.5,3.1,10.8,3.1s9.2-1.3,12.1-4c2.8-2.7,4.6-5.6,5.4-8.7h7.4c-1.5,5.7-4.3,10.2-8.5,13.7-4.2,3.5-9.6,5.2-16.4,5.2s-10.5-1.3-14.6-3.9ZM474,46.4c0-3.4-.7-6.6-2.2-9.4-1.5-2.9-3.6-5.1-6.3-6.8-2.8-1.7-6-2.5-9.8-2.5-5.4,0-9.9,1.8-13.5,5.4-3.5,3.6-5.5,8-5.8,13.4h37.5Z"/><path d="M487.2,62.9h17l-3.4,17h-17l3.4-17Z"/><path d="M517,75.4c-4.5-4.2-6.8-10.2-6.8-17.9s1.3-12.7,4-18.3,6.6-10,11.8-13.4c5.2-3.4,11.4-5,18.7-5s10.1,1,13.9,3.1c3.8,2,6.5,4.8,8.3,8.4,1.7,3.5,2.4,7.5,2.1,12h-17.4c.2-2.9-.3-5.3-1.5-7.2-1.2-1.9-3.4-2.8-6.6-2.8s-5.9,1.1-8.3,3.2c-2.4,2.1-4.2,4.9-5.5,8.4-1.3,3.5-1.9,7.2-1.9,11.1s.8,6.6,2.3,8.5c1.5,2,3.8,3,6.8,3s6.1-.9,7.8-2.6c1.7-1.7,3.1-4.2,4.2-7.4h17.4c-1.8,7-5.4,12.7-10.8,17-5.4,4.3-12.1,6.5-20,6.5s-14-2.1-18.5-6.4Z"/><path d="M573.9,77.8c-2.8-2.5-4.2-6.1-4.2-10.7s2.3-10.9,7-14.1c4.7-3.1,11.1-5.6,19.1-7.4,5.7-1.3,9.8-2.5,12.3-3.6,2.5-1.1,3.7-2.8,3.7-5s-2.3-4.4-6.8-4.4-5.8.7-7.6,2.1c-1.9,1.4-3.3,3.5-4.1,6.4h-16.9c1.4-6.1,4.6-11,9.7-14.8,5-3.8,12-5.6,20.9-5.6s12.5,1.4,16.2,4.1c3.7,2.7,5.6,7.1,5.6,13s-.3,4.7-.9,7.8l-4.4,21c-.2,1-.3,1.8-.3,2.5s.2,1.2.6,1.5c.4.3,1.1.4,2.1.4h.9c0-.1-1.8,9-1.8,9-3.8.7-6.9,1-9.3,1-6.9,0-10.3-2.7-10.3-8.2h-.2c-2.1,2.6-4.8,4.7-8.2,6.3-3.3,1.6-7.1,2.4-11.3,2.4s-9.1-1.3-11.9-3.8ZM589.5,67.7c1.2.9,2.7,1.4,4.6,1.4,7.4,0,12.1-4.2,14.1-12.7l1.1-4.7c-1.5.8-2.8,1.5-4.1,1.9s-3.6,1-7,1.8c-3.6.8-6.3,1.8-8,3-1.7,1.2-2.5,2.9-2.5,5.1s.6,3.3,1.7,4.2Z"/></svg>
								</Link>
								<ul ref={navigationRef}>
									<li data-is="/">
										<Link to="/">
											<div className="icon">
												<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20.003" viewBox="0 0 20 20.003"><g><path d="M306.787.078c1.82-.185,3.908.117,5.756-.01a2.028,2.028,0,0,1,1.789,1.789c-.1,1.843.139,3.838,0,5.663a2.019,2.019,0,0,1-1.756,1.822c-1.847.164-3.929-.122-5.8,0a2.035,2.035,0,0,1-1.756-2.03c-.1-1.711.082-3.526,0-5.248A2.031,2.031,0,0,1,306.787.078m.138,1.319a.686.686,0,0,0-.548.564V7.416a.645.645,0,0,0,.608.608c1.742-.114,3.667.147,5.387,0a.675.675,0,0,0,.643-.642c.152-1.7-.118-3.627,0-5.352a.7.7,0,0,0-.643-.643Z" transform="translate(-294.379 -0.016)" /><path d="M306.676,307.105l5.826-.009a2.021,2.021,0,0,1,1.754,1.789c-.107,1.839.144,3.843,0,5.663a2.021,2.021,0,0,1-1.791,1.822c-1.85-.108-3.867.145-5.7,0a2.03,2.03,0,0,1-1.822-2c-.117-1.7.088-3.531,0-5.247a2.028,2.028,0,0,1,1.731-2.021m.138,1.319a.67.67,0,0,0-.512.565l.024,5.6a.7.7,0,0,0,.583.459c1.86-.031,3.736.056,5.587-.044a.693.693,0,0,0,.444-.6c-.118-1.725.152-3.651,0-5.352a.684.684,0,0,0-.609-.641Z" transform="translate(-294.304 -296.414)" /><path d="M1.777.062C3.6-.125,5.687.181,7.534.053A2.011,2.011,0,0,1,9.323,1.842c-.1,1.844.136,3.836,0,5.663A1.991,1.991,0,0,1,7.568,9.326c-1.826.163-3.883-.122-5.733,0A1.988,1.988,0,0,1,.046,7.539C-.1,5.689.154,3.646.052,1.776A2.007,2.007,0,0,1,1.777.062M1.914,1.38a.7.7,0,0,0-.547.565l.024,5.6a.7.7,0,0,0,.583.459l5.571-.025A.7.7,0,0,0,8,7.365c.145-1.71-.112-3.621,0-5.352A.686.686,0,0,0,7.4,1.372Z" transform="translate(0 0)" /><path d="M3.073,307.105,8.9,307.1a2.01,2.01,0,0,1,1.754,1.789c.148,1.817-.111,3.826,0,5.663a2,2,0,0,1-1.791,1.822c-1.817.148-3.826-.111-5.663,0a2.006,2.006,0,0,1-1.822-1.756l0-5.8a1.992,1.992,0,0,1,1.69-1.714m.138,1.319a.707.707,0,0,0-.512.565l.033,5.629a.7.7,0,0,0,.608.434c1.709.146,3.622-.113,5.353,0a.683.683,0,0,0,.643-.643c-.113-1.731.146-3.643,0-5.352a.687.687,0,0,0-.574-.641Z" transform="translate(-1.331 -296.414)" /></g></svg>
											</div>
											<span>Tableau de bord</span>
										</Link>
									</li>
									<li data-is="/profil/">
										<Link to="/profil/">
											<div className="icon">
												<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20.368" viewBox="0 0 20 20.368"><g><path d="M19.994,19.447a10.041,10.041,0,0,0-5.861-8.538c-.266-.122-.546-.21-.808-.339-.014-.061.369-.314.441-.377a5.793,5.793,0,1,0-7.518.018c.108.093.306.211.392.3.027.027.046.03.034.08A10.033,10.033,0,0,0,.094,18.47,9.442,9.442,0,0,0,0,19.57H0c0,.008,0,.017,0,.025a.774.774,0,1,0,1.548,0c0-.015,0-.031,0-.046a8.552,8.552,0,0,1,4.985-7.221A8.459,8.459,0,0,1,18.424,19.57h0a.774.774,0,0,0,.774.774h.028A.774.774,0,0,0,20,19.57v-.028a.78.78,0,0,0-.006-.095M6.111,7.465a4.226,4.226,0,1,1,7.194.958,4.242,4.242,0,0,1-7.194-.958" transform="translate(0 -0.001)" /></g></svg>
											</div>
											<span>Mon compte</span>
										</Link>
									</li>
									<li data-is="/mes-sites/">
										<Link to="/mes-sites/">
											<div className="icon">
												<svg xmlns="http://www.w3.org/2000/svg" width="24" height="22.173" viewBox="0 0 24 22.173"><g><path d="M12.855,8.325v3.186l.135.061c1.6.078,3.3-.111,4.89,0a3.812,3.812,0,0,1,3.5,3.308,11.129,11.129,0,0,1,.044,1.344h.919a1.954,1.954,0,0,1,1.624,1.738,19.23,19.23,0,0,1,0,2.427,1.878,1.878,0,0,1-1.44,1.688,20.3,20.3,0,0,1-3.537.041A1.9,1.9,0,0,1,17.391,20.5a19.229,19.229,0,0,1,0-2.62,1.945,1.945,0,0,1,1.624-1.66h1V15.147a2.515,2.515,0,0,0-2.131-2.17H12.855v3.245h.958A1.985,1.985,0,0,1,15.427,17.7a13.686,13.686,0,0,1,0,2.953,1.934,1.934,0,0,1-1.585,1.465c-1.545-.156-4.447.7-4.926-1.428a14.209,14.209,0,0,1,0-3.028,1.992,1.992,0,0,1,1.573-1.438h.958V12.977h-5.3a2.549,2.549,0,0,0-2.092,2.013v1.231h.958A1.958,1.958,0,0,1,6.639,17.96a19.121,19.121,0,0,1,0,2.427A1.89,1.89,0,0,1,5.2,22.075a20.563,20.563,0,0,1-3.537.041A1.9,1.9,0,0,1,.086,20.6a10.813,10.813,0,0,1,.042-3.012,1.931,1.931,0,0,1,1.564-1.369h.958v-1.31a4.3,4.3,0,0,1,.9-2.032A4.059,4.059,0,0,1,6.071,11.57h5.377V8.325H9.277A1.93,1.93,0,0,1,7.5,6.391a40.229,40.229,0,0,1,0-4.421A1.92,1.92,0,0,1,9.549.035c1.9-.1,3.847.046,5.747.044A1.907,1.907,0,0,1,16.8,1.7c.155,1.6-.107,3.449-.01,5.072a1.936,1.936,0,0,1-1.73,1.554Zm-3.49-6.87a.493.493,0,0,0-.46.478c.1,1.438-.127,3.04,0,4.458a.5.5,0,0,0,.528.528c1.759-.1,3.657.129,5.4,0,.443-.033.557-.161.606-.606-.08-1.376.1-2.863,0-4.225-.033-.447-.147-.605-.606-.645-1.74-.15-3.7.107-5.466.012M1.817,17.638a.541.541,0,0,0-.38.519,14.051,14.051,0,0,0,0,2.032.522.522,0,0,0,.448.529c.931-.068,1.98.087,2.9,0a.461.461,0,0,0,.449-.411,15.587,15.587,0,0,0,0-2.231.454.454,0,0,0-.287-.417ZM10.4,20.587a.491.491,0,0,0,.317.132c.933-.068,1.978.084,2.9,0a.5.5,0,0,0,.448-.49,14.517,14.517,0,0,0,0-2.111.49.49,0,0,0-.487-.49,20.584,20.584,0,0,0-2.818,0,.483.483,0,0,0-.489.489,15.227,15.227,0,0,0,0,2.152.605.605,0,0,0,.131.319m8.735-2.949A.466.466,0,0,0,18.8,18c-.1.7.077,1.621,0,2.349a.461.461,0,0,0,.411.371c.889.107,1.985-.083,2.9,0a.464.464,0,0,0,.449-.411,15.576,15.576,0,0,0,0-2.231.446.446,0,0,0-.412-.449Z" transform="translate(0 0)" /></g></svg>

											</div>
											<span>Mes sites</span>
										</Link>
									</li>
									<li data-is="/mes-abonnements/">
										<Link to="/mes-abonnements/">
											<div className="icon">
												<svg xmlns="http://www.w3.org/2000/svg" width="22" height="19.193" viewBox="0 0 22 19.193"><g><path d="M1.406,116.2v2.726H9.031a1.618,1.618,0,0,1,.209.078.686.686,0,0,1-.058,1.257c-.035.013-.207.064-.223.064H1.406v8.215H20.6v-4.968c0-.113.213-.342.311-.407a.68.68,0,0,1,1.053.478l0,5.054a1.385,1.385,0,0,1-1.3,1.208H1.351a1.376,1.376,0,0,1-1.3-1.1c-.105-4.163-.014-8.343-.046-12.512a1.427,1.427,0,0,1,1.2-1.452H9.031a.681.681,0,0,1,.281,1.25,2.025,2.025,0,0,1-.245.113Z" transform="translate(0.001 -110.715)" fill="#fff"/><path d="M309.971.01a.9.9,0,0,1,.51.081c1.552.562,3.083,1.423,4.643,1.995a.74.74,0,0,1,.428.469c.136,3.692.277,6.751-2.666,9.374a12.8,12.8,0,0,1-2.463,1.7c-.51.218-.979-.178-1.41-.447-2.9-1.809-4.281-3.866-4.418-7.349a26.52,26.52,0,0,1,0-3.086.763.763,0,0,1,.458-.654C306.51,1.319,308.3.829,309.775.066a1.134,1.134,0,0,1,.2-.055m.107,1.432-4.064,1.751c0,1.864-.223,3.829.562,5.573a7.3,7.3,0,0,0,2.567,2.85,6.392,6.392,0,0,0,.959.581,8.085,8.085,0,0,0,3.472-3.348,7.693,7.693,0,0,0,.641-2.839c.042-.931-.02-1.889-.019-2.818Z" transform="translate(-293.61 0)" fill="#fff"/><path d="M77.8,342.534c.889-.136,2.077.075,3,0a.687.687,0,0,1-.03,1.351c-.9.123-2.072-.078-3-.005a.688.688,0,0,1,.037-1.345" transform="translate(-74.461 -330.185)" fill="#fff"/><path d="M382.86,116.338a1.048,1.048,0,0,1,.178-.128c.907-.416,1.231,1.058,1.765,1.478l2.245-2.778a.686.686,0,0,1,.946.982c-.731,1.146-1.945,2.236-2.708,3.391a.723.723,0,0,1-1.054.087c-.4-.713-1.144-1.495-1.486-2.209a.705.705,0,0,1,.114-.824" transform="translate(-368.917 -110.657)" fill="#fff"/></g></svg>
											</div>
											<span>Abonnements</span>
										</Link>
									</li>
								</ul>
							</div>
							<div className="bottom">
								<ul ref={endNavigationRef}>
									<li data-is="/support/">
										<Link to="/support/">
											<div className="icon">
												<svg xmlns="http://www.w3.org/2000/svg" width="22" height="21.953" viewBox="0 0 22 21.953"><g><path d="M2.438.012,15.365,0A2.788,2.788,0,0,1,17.9,2.892c.138,2.761-.074,5.668-.042,8.438a2.784,2.784,0,0,1-2.494,2.393l-10.269.008L1.186,16.971A.716.716,0,0,1,0,16.364V2.855A2.8,2.8,0,0,1,2.438.012M1.4,14.98l3.065-2.522.232-.092c3.573-.05,7.159.058,10.725-.054a1.38,1.38,0,0,0,1.07-1.194l0-8.443a1.382,1.382,0,0,0-1.312-1.311l-12.505,0A1.446,1.446,0,0,0,1.4,2.534Z" transform="translate(-0.001)" fill="#fff"/><path d="M167.573,167.1V155.334a1.525,1.525,0,0,0-.862-1.113c-.431-.171-1.113.014-1.186-.682-.1-.968,1.039-.844,1.652-.61a2.814,2.814,0,0,1,1.716,2.021c.107,4.54.014,9.1.047,13.642a.7.7,0,0,1-1.092.514l-3.283-2.609-9.516-.006a2.9,2.9,0,0,1-2.6-3.4.7.7,0,1,1,1.4-.038c.025.274-.028.584,0,.86a1.375,1.375,0,0,0,1.009,1.146c3.345.143,6.715.017,10.069.064l.305.126Z" transform="translate(-146.946 -147.269)" fill="#fff"/><path d="M115.717,113.912l8.291-.009a.7.7,0,0,1,0,1.4H115.78a.7.7,0,0,1-.063-1.391" transform="translate(-110.945 -109.806)" fill="#fff"/><path d="M115.622,190.886l5.737-.006a.69.69,0,0,1-.033,1.362l-5.674,0a.685.685,0,0,1-.03-1.353" transform="translate(-110.921 -184.015)" fill="#fff"/></g></svg>

											</div>
											<span>Support</span>
										</Link>
									</li>
									<li>
										<div ref={disconnectRef} className="fake-link">
											<div className="icon">
												<svg xmlns="http://www.w3.org/2000/svg" width="18" height="22.554" viewBox="0 0 18 22.554"><g><path d="M17.719,4.941a.9.9,0,0,1-1.282-.028c-.417-.485-.184-1.384-.248-1.98a1.455,1.455,0,0,0-1.3-1.2L3.161,1.727A1.478,1.478,0,0,0,1.728,3.114V19.44a1.463,1.463,0,0,0,1.206,1.34l12.175-.011a1.491,1.491,0,0,0,1.075-1.107c.076-.555-.147-1.493.186-1.951a.874.874,0,0,1,1.591.454c.244,2.265-.682,4.18-3.115,4.387H3.117A3.25,3.25,0,0,1,0,19.668V2.932A3.22,3.22,0,0,1,2.89,0L14.94,0a3.235,3.235,0,0,1,3.023,3.024c.035.484.083,1.566-.245,1.918" transform="translate(0 0.001)" fill="#fff"/><path d="M184.871,157.889H178.8a1.019,1.019,0,0,1-.5-.272.842.842,0,0,1,.118-1.293,1.307,1.307,0,0,1,.292-.163h6.161c.02-.079-.033-.091-.068-.137-.415-.542-1.878-1.652-2.057-2.171a.873.873,0,0,1,1.353-.989c1.05,1.154,2.277,2.162,3.336,3.3.408.44.7.826.278,1.406l-3.569,3.569a.874.874,0,0,1-1.252-1.207c.5-.651,1.411-1.256,1.911-1.908.035-.046.088-.057.068-.137" transform="translate(-169.956 -145.748)" fill="#fff"/></g></svg>
											</div>
											<span>Déconnexion</span>
										</div>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div className="view">
						<div className="top">
							<span>{USER.firstname ? `Bonjour ${USER.firstname}` : 'Bonjour,'}</span>
						</div>
						<div className="bottom">
							<div className="intro">
								<h1 dangerouslySetInnerHTML={{ __html: mainTitle }} />
								{mainText && (
									<div className="text">
										<p>{mainText}</p>
									</div>
								)}
							</div>
							{location.pathname === '/' && <Dashboard />}
							{location.pathname === '/profil/' && <Edit />}
							{location.pathname === '/mes-sites/' && <Sites />}
							{location.pathname === '/mes-abonnements/' && <Subscriptions />}
							{location.pathname === '/support/' && <Support />}
						</div>
					</div>
				</div>
			) : (
				<div id="login_view">
					<div className="container">
						<div className="contents">
							{location.pathname === '/' && <Connexion />}
							{location.pathname === '/mdp-perdu/' && <Recover />}
							{location.pathname === '/change-mdp/' && <RecoverLast />}
						</div>
					</div>
				</div>
			)}
		</>
	);
	
};

export default Default;